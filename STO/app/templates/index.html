{% extends "base.html" %}

{% block title %}–°–¢–û+ –≤ –ì—Ä–æ–¥–Ω–æ - –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å{% endblock %}

{% block content %}
<!-- –ì–µ—Ä–æ–π —Å–µ–∫—Ü–∏—è -->
<section class="hero">
    <div class="container">
        <div class="hero-content">
            <h1>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å –≤ –ì—Ä–æ–¥–Ω–æ</h1>
            <p>–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–µ–º–æ–Ω—Ç –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –µ–≤—Ä–æ–ø–µ–π—Å–∫–∏—Ö, –∞–∑–∏–∞—Ç—Å–∫–∏—Ö –∏ –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏—Ö –º–∞—Ä–æ–∫</p>
            <a href="#booking" class="cta-button">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –æ–Ω–ª–∞–π–Ω</a>
        </div>
    </div>
</section>

<!-- –§–æ—Ä–º–∞ –∑–∞–ø–∏—Å–∏ -->
<section id="booking" class="section">
    <div class="container">
        <div class="booking-form">
            <div class="section-title">
                <h2>–û–Ω–ª–∞–π–Ω-–∑–∞–ø–∏—Å—å –Ω–∞ –°–¢–û</h2>
                <p>–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É –∏ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –≤–∏–∑–∏—Ç–∞</p>
            </div>
            
            <form action="/create_appointment" method="POST" id="appointmentForm">
                <!-- –õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ -->
                <div class="form-grid">
                    <div class="form-group">
                        <label for="name">–í–∞—à–µ –∏–º—è *</label>
                        <input type="text" id="name" name="name" class="form-control" required 
                               placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤">
                    </div>
                    <div class="form-group">
                        <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
                        <input type="tel" id="phone" name="phone" class="form-control" required 
                               placeholder="+375 (29) 123-45-67">
                    </div>
                </div>

                <!-- –î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—è -->
                <div class="form-grid">
                    <div class="form-group">
                        <label for="car_brand">–ú–∞—Ä–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è *</label>
                        <select id="car_brand" name="car_brand" class="form-control" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Ä–∫—É</option>
                            {% for brand in car_brands %}
                                <option value="{{ brand.id }}" data-country="{{ brand.country }}">
                                    {{ brand.name }}
                                </option>
                            {% endfor %}
                            <option value="other">–î—Ä—É–≥–∞—è –º–∞—Ä–∫–∞</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="car_model">–ú–æ–¥–µ–ª—å –∞–≤—Ç–æ–º–æ–±–∏–ª—è *</label>
                        <input type="text" id="car_model" name="car_model" class="form-control" required 
                               placeholder="Camry, X5, Focus –∏ —Ç.–¥.">
                    </div>
                    <div class="form-group">
                        <label for="car_year">–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞ *</label>
                        <input type="number" id="car_year" name="car_year" class="form-control" required 
                               min="1990" max="2024" placeholder="2015">
                    </div>
                </div>
                
                <!-- –£—Å–ª—É–≥–∞ –∏ –≤—Ä–µ–º—è -->
                <div class="form-grid">
                    <div class="form-group">
                        <label for="service">–£—Å–ª—É–≥–∞ *</label>
                        <select id="service" name="service" class="form-control" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É</option>
                            {% for service in services %}
                                <option value="{{ service.id }}" 
                                        data-price="{{ service.base_price }}"
                                        data-time="{{ service.standard_time_minutes }}">
                                    {{ service.name }} - –æ—Ç {{ service.base_price }} —Ä—É–±. ({{ service.standard_time_minutes // 60 }}—á {{ service.standard_time_minutes % 60 }}–º–∏–Ω)
                                </option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="date">–ñ–µ–ª–∞–µ–º–∞—è –¥–∞—Ç–∞ *</label>
                        <input type="date" id="date" name="date" class="form-control" required 
                               min="{{ today }}">
                    </div>
                    <div class="form-group">
                        <label for="time">–£–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è *</label>
                        <select id="time" name="time" class="form-control" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è</option>
                            <!-- –í—Ä–µ–º—è –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="notes">–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã</label>
                    <textarea id="notes" name="notes" class="form-control" rows="4" 
                              placeholder="–û–ø–∏—à–∏—Ç–µ —Å–∏–º–ø—Ç–æ–º—ã –ø—Ä–æ–±–ª–µ–º—ã –∏–ª–∏ –æ—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è..."></textarea>
                </div>
                
                <!-- –ë–ª–æ–∫ —Å —Ä–∞—Å—á–µ—Ç–æ–º -->
                <div class="calculation-card">
                    <h4>üìä –†–∞—Å—á–µ—Ç –∑–∞–∫–∞–∑–∞</h4>
                    <div class="calculation-grid">
                        <div class="calc-item">
                            <span class="calc-label">–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:</span>
                            <span class="calc-value" id="servicePrice">0 —Ä—É–±.</span>
                        </div>
                        <div class="calc-item">
                            <span class="calc-label">–ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:</span>
                            <span class="calc-value" id="serviceTime">0 —á 0 –º–∏–Ω</span>
                        </div>
                        <div class="calc-item">
                            <span class="calc-label">–†–∞—Å—á–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è:</span>
                            <span class="calc-value" id="endTime">--:--</span>
                        </div>
                    </div>
                    <div class="calculation-note">
                        <small>‚ö†Ô∏è –û–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –ø–æ—Å–ª–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏</small>
                    </div>
                </div>
                
                <button type="submit" class="submit-btn" id="submitBtn">
                    üöó –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –°–¢–û
                </button>
                
                <div class="form-note">
                    <p>üìû <strong>–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–∑–≤–æ–Ω–∏—Ç–µ:</strong> +375 (29) 123-45-67</p>
                    <p>‚è∞ <strong>–ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã:</strong> –ü–Ω-–ü—Ç 8:30-17:30, –°–± 9:00-15:00 (—Ç–æ–ª—å–∫–æ –ø–æ –∑–∞–ø–∏—Å–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)</p>
                    <p>üìç <strong>–ê–¥—Ä–µ—Å:</strong> –≥. –ì—Ä–æ–¥–Ω–æ, –æ–∑–µ—Ä—Å–∫–æ–µ —à–æ—Å—Å–µ 16–î</p>
                </div>
            </form>
        </div>
    </div>
</section>
                
                <!-- –ë–ª–æ–∫ —Å —Ä–∞—Å—á–µ—Ç–æ–º —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏ –≤—Ä–µ–º–µ–Ω–∏ -->
                <div class="calculation-card">
                    <h4>üìä –†–∞—Å—á–µ—Ç –∑–∞–∫–∞–∑–∞</h4>
                    <div class="calculation-grid">
                        <div class="calc-item">
                            <span class="calc-label">–°—Ç–æ–∏–º–æ—Å—Ç—å —É—Å–ª—É–≥–∏:</span>
                            <span class="calc-value" id="servicePrice">0 —Ä—É–±.</span>
                        </div>
                        <div class="calc-item">
                            <span class="calc-label">–ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è:</span>
                            <span class="calc-value" id="serviceTime">0 —á</span>
                        </div>
                        <div class="calc-item total">
                            <span class="calc-label">–û–∂–∏–¥–∞–µ–º–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:</span>
                            <span class="calc-value" id="totalPrice">0 —Ä—É–±.</span>
                        </div>
                    </div>
                </div>
                
                <button type="submit" class="submit-btn" id="submitBtn">
                    üöó –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –°–¢–û
                </button>
                
                <div class="form-note">
                    <p>üìû <strong>–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–∑–≤–æ–Ω–∏—Ç–µ:</strong> +375 (29) 123-45-67</p>
                    <p>‚è∞ <strong>–ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã:</strong> –ü–Ω-–ü—Ç 8:30-17:30, –°–± 9:00-15:00</p>
                </div>
            </form>
        </div>
    </div>
</section>

<!-- –£—Å–ª—É–≥–∏ -->
<section id="services" class="section section-light">
    <div class="container">
        <div class="section-title">
            <h2>–ù–∞—à–∏ —É—Å–ª—É–≥–∏</h2>
            <p>–ü–æ–ª–Ω—ã–π —Å–ø–µ–∫—Ç—Ä —É—Å–ª—É–≥ –ø–æ —Ä–µ–º–æ–Ω—Ç—É –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—é –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π</p>
        </div>
        
        <div class="services-grid">
            <div class="service-card">
                <div class="service-icon">üîç</div>
                <h3>–ö–æ–º–ø—å—é—Ç–µ—Ä–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h3>
                <p>–ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –∞–≤—Ç–æ–º–æ–±–∏–ª—è</p>
                <div class="service-price">–æ—Ç 1500 —Ä—É–±.</div>
            </div>
            
            <div class="service-card">
                <div class="service-icon">‚öôÔ∏è</div>
                <h3>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ</h3>
                <p>–†–µ–≥—É–ª—è—Ä–Ω–æ–µ –¢–û, –∑–∞–º–µ–Ω–∞ –º–∞—Å–ª–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤</p>
                <div class="service-price">–æ—Ç 2000 —Ä—É–±.</div>
            </div>
            
            <div class="service-card">
                <div class="service-icon">üöó</div>
                <h3>–†–µ–º–æ–Ω—Ç –¥–≤–∏–≥–∞—Ç–µ–ª—è</h3>
                <p>–ö–∞–ø–∏—Ç–∞–ª—å–Ω—ã–π –∏ —Ç–µ–∫—É—â–∏–π —Ä–µ–º–æ–Ω—Ç –¥–≤–∏–≥–∞—Ç–µ–ª–µ–π</p>
                <div class="service-price">–æ—Ç 5000 —Ä—É–±.</div>
            </div>
            
            <div class="service-card">
                <div class="service-icon">üõë</div>
                <h3>–¢–æ—Ä–º–æ–∑–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</h3>
                <p>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —Ä–µ–º–æ–Ω—Ç —Ç–æ—Ä–º–æ–∑–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã</p>
                <div class="service-price">–æ—Ç 3000 —Ä—É–±.</div>
            </div>
            
            <div class="service-card">
                <div class="service-icon">üîß</div>
                <h3>–≠–ª–µ–∫—Ç—Ä–∏–∫–∞</h3>
                <p>–†–µ–º–æ–Ω—Ç —ç–ª–µ–∫—Ç—Ä–æ–æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–æ–≤–æ–¥–∫–∏</p>
                <div class="service-price">–æ—Ç 2500 —Ä—É–±.</div>
            </div>
            
            <div class="service-card">
                <div class="service-icon">üõû</div>
                <h3>–•–æ–¥–æ–≤–∞—è —á–∞—Å—Ç—å</h3>
                <p>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —Ä–µ–º–æ–Ω—Ç –ø–æ–¥–≤–µ—Å–∫–∏</p>
                <div class="service-price">–æ—Ç 3500 —Ä—É–±.</div>
            </div>
        </div>
    </div>
</section>

<!-- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ -->
<section id="advantages" class="section">
    <div class="container">
        <div class="section-title">
            <h2>–ü–æ—á–µ–º—É –≤—ã–±–∏—Ä–∞—é—Ç –Ω–∞—Å</h2>
            <p>–ù–∞—à–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–ª—è –≤–∞—à–µ–≥–æ –∫–æ–º—Ñ–æ—Ä—Ç–∞</p>
        </div>
        
        <div class="advantages-grid">
            <div class="advantage-card">
                <div class="advantage-icon">‚è±Ô∏è</div>
                <h3>–ë—ã—Å—Ç—Ä–æ</h3>
                <p>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞ 30 –º–∏–Ω—É—Ç, –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ä–µ–º–æ–Ω—Ç–æ–≤ –≤ –¥–µ–Ω—å –æ–±—Ä–∞—â–µ–Ω–∏—è</p>
            </div>
            
            <div class="advantage-card">
                <div class="advantage-icon">üíé</div>
                <h3>–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ</h3>
                <p>–û–ø—ã—Ç–Ω—ã–µ –º–∞—Å—Ç–µ—Ä–∞ —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</p>
            </div>
            
            <div class="advantage-card">
                <div class="advantage-icon">üí∞</div>
                <h3>–î–æ—Å—Ç—É–ø–Ω–æ</h3>
                <p>–ß–µ—Å—Ç–Ω—ã–µ —Ü–µ–Ω—ã, –ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è —Å–º–µ—Ç–∞, –≥–∞—Ä–∞–Ω—Ç–∏—è –Ω–∞ —Ä–∞–±–æ—Ç—ã</p>
            </div>
            
            <div class="advantage-card">
                <div class="advantage-icon">üîÑ</div>
                <h3>–£–¥–æ–±–Ω–æ</h3>
                <p>–û–Ω–ª–∞–π–Ω-–∑–∞–ø–∏—Å—å, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –±–µ–∑–Ω–∞–ª–∏—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç</p>
            </div>
        </div>
    </div>
</section>

<!-- –ö–æ–Ω—Ç–∞–∫—Ç—ã -->
<section id="contacts" class="section section-light">
    <div class="container">
        <div class="section-title">
            <h2>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
            <p>–ü—Ä–∏–µ–∑–∂–∞–π—Ç–µ –∫ –Ω–∞–º –≤ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è</p>
        </div>
        
        <div class="services-grid">
            <div class="service-card">
                <h3>üìç –ê–¥—Ä–µ—Å</h3>
                <p>–≥. –ì—Ä–æ–¥–Ω–æ, –æ–∑–µ—Ä—Å–∫–æ–µ —à–æ—Å—Å–µ 16–î</p>
                <p>–í—Ö–æ–¥ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –ø–∞—Ä–∫–æ–≤–∫–∏</p>
            </div>
            
            <div class="service-card">
                <h3>üìû –¢–µ–ª–µ—Ñ–æ–Ω—ã</h3>
                <p>+375 (29) 123-45-67</p>
                <p>+375 (29) 765-43-21</p>
            </div>
            
            <div class="service-card">
                <h3>‚è∞ –ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã</h3>
                <p>–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ - –ü—è—Ç–Ω–∏—Ü–∞: 8:30 - 17:30</p>
                <p>–°—É–±–±–æ—Ç–∞: 9:00 - 15:00</p>
                <p>–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ: –≤—ã—Ö–æ–¥–Ω–æ–π</p>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('appointmentForm');
    const serviceSelect = document.getElementById('service');
    const dateInput = document.getElementById('date');
    const timeSelect = document.getElementById('time');
    const servicePriceEl = document.getElementById('servicePrice');
    const serviceTimeEl = document.getElementById('serviceTime');
    const endTimeEl = document.getElementById('endTime');
    const submitBtn = document.getElementById('submitBtn');

    // –†–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è
    const WORK_HOURS = {
        weekdays: ['08:30', '09:00', '09:30', '10:00', '10:30', '11:00', '11:30', '12:00', 
                  '12:30', '13:00', '13:30', '14:00', '14:30', '15:00', '15:30', '16:00', '16:30', '17:00'],
        saturday: ['09:00', '09:30', '10:00', '10:30', '11:00', '11:30', '12:00', '12:30', '13:00', '13:30', '14:00']
    };

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —É—Å–ª—É–≥–∏
    serviceSelect.addEventListener('change', updateCalculation);
    dateInput.addEventListener('change', updateAvailableTimes);
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞—Ç—ã (–º–∏–Ω–∏–º—É–º —Å–µ–≥–æ–¥–Ω—è)
    const today = new Date().toISOString().split('T')[0];
    dateInput.min = today;
    
    // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞—Å—á–µ—Ç–∞
    function updateCalculation() {
        const selectedOption = serviceSelect.options[serviceSelect.selectedIndex];
        const price = selectedOption.getAttribute('data-price') || 0;
        const timeMinutes = parseInt(selectedOption.getAttribute('data-time')) || 0;
        
        const hours = Math.floor(timeMinutes / 60);
        const minutes = timeMinutes % 60;
        
        servicePriceEl.textContent = price + ' —Ä—É–±.';
        serviceTimeEl.textContent = hours + ' —á ' + minutes + ' –º–∏–Ω';
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞
        if (timeSelect.value) {
            updateEndTime(timeSelect.value, timeMinutes);
        }
        
        // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –µ—Å–ª–∏ —É—Å–ª—É–≥–∞ –≤—ã–±—Ä–∞–Ω–∞
        submitBtn.disabled = !price;
        updateAvailableTimes();
    }
    
    // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
    function updateAvailableTimes() {
        const selectedDate = new Date(dateInput.value);
        const dayOfWeek = selectedDate.getDay(); // 0 - –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ, 6 - —Å—É–±–±–æ—Ç–∞
        
        // –û—á–∏—â–∞–µ–º select
        timeSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è</option>';
        
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–Ω—è –Ω–µ–¥–µ–ª–∏
        let workHours = [];
        if (dayOfWeek === 6) { // –°—É–±–±–æ—Ç–∞
            workHours = WORK_HOURS.saturday;
        } else if (dayOfWeek === 0) { // –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ
            // –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ - –≤—ã—Ö–æ–¥–Ω–æ–π
            timeSelect.innerHTML = '<option value="">–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ - –≤—ã—Ö–æ–¥–Ω–æ–π</option>';
            timeSelect.disabled = true;
            return;
        } else { // –ë—É–¥–Ω–∏
            workHours = WORK_HOURS.weekdays;
        }
        
        timeSelect.disabled = false;
        
        // –î–æ–±–∞–≤–ª—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ–µ –≤—Ä–µ–º—è
        workHours.forEach(time => {
            const option = document.createElement('option');
            option.value = time;
            option.textContent = time;
            timeSelect.appendChild(option);
        });
        
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤—Ä–µ–º–µ–Ω–∏
        timeSelect.addEventListener('change', function() {
            if (serviceSelect.value) {
                const timeMinutes = parseInt(serviceSelect.options[serviceSelect.selectedIndex].getAttribute('data-time')) || 0;
                updateEndTime(this.value, timeMinutes);
            }
        });
    }
    
    // –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è
    function updateEndTime(startTime, durationMinutes) {
        if (!startTime) return;
        
        const [hours, minutes] = startTime.split(':').map(Number);
        const startDate = new Date();
        startDate.setHours(hours, minutes, 0, 0);
        
        const endDate = new Date(startDate.getTime() + durationMinutes * 60000);
        const endTime = endDate.getHours().toString().padStart(2, '0') + ':' + 
                       endDate.getMinutes().toString().padStart(2, '0');
        
        endTimeEl.textContent = endTime;
    }
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞
    const phoneInput = document.getElementById('phone');
    phoneInput.addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        if (value.startsWith('375')) {
            value = '+' + value;
        }
        if (value.length > 4) {
            value = value.replace(/(\+\d{3})(\d{2})(\d{3})(\d{2})(\d{2})/, '$1 ($2) $3-$4-$5');
        }
        e.target.value = value;
    });
    
    // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ—à–µ–¥—à–∏—Ö –¥–∞—Ç –∏ –≤—ã—Ö–æ–¥–Ω—ã—Ö
    dateInput.addEventListener('change', function() {
        const selectedDate = new Date(this.value);
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        
        if (selectedDate < today) {
            alert('–ù–µ–ª—å–∑—è –≤—ã–±—Ä–∞—Ç—å –ø—Ä–æ—à–µ–¥—à—É—é –¥–∞—Ç—É');
            this.value = '';
            return;
        }
        
        const dayOfWeek = selectedDate.getDay();
        if (dayOfWeek === 0) { // –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ
            alert('–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ - –≤—ã—Ö–æ–¥–Ω–æ–π –¥–µ–Ω—å. –í—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥—É—é –¥–∞—Ç—É.');
            this.value = '';
        }
    });
    
    // –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ —Ñ–æ—Ä–º–µ
    const ctaButton = document.querySelector('.cta-button');
    if (ctaButton) {
        ctaButton.addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('booking').scrollIntoView({
                behavior: 'smooth'
            });
        });
    }
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    updateAvailableTimes();
});
</script>
{% endblock %}